\title{
1.はじめに
}

ACPI (Advanced Configuration and Power Interface)仕様は、堅牢なOS (OS)主導のマザーボードデバイスコンフィギュレーションと、デバイスおよびシステム全体の電源管理を可能にする業界共通のインタフェースを確立するために開発された。ACPIは、OS主導のコンフィギュレーションと電源管理 (OSPM)の重要な要素である。

ACPI は、既存の電源管理 BIOS コード、APM (Advanced Power Management)アプリケーションプログラミングインタフェース (API)、PNPBIOS API、MPS (Multiprocessor Specification)テーブルなどの ACPI 以前のコレクションを、明確に定義された電源管理および構成インタフェース仕様に進化させた。ACPIは、既存の (レガシー)ハードウェアからACPIハードウェアへの秩序あるマイグレーションのための手段を提供し、ACPIとレガシーの両方のメカニズムが単一のマシンに存在し、必要に応じて使用されることを可能にする。

さらに、オリジナルのACPI仕様が開始された時点で構築されていたシステムアーキテクチャは、従来の「プラグアンドプレイ」インタフェースの限界を超えるものでした。ACPIは、既存のマザーボード設定インターフェイスを進化させ、より堅牢で、潜在的により効率的な方法で高度なアーキテクチャをサポートした。

本仕様で定義されるインタフェースと OSPM の概念は、デスクトップ、モバイル、ワークステーション、およびサーバマシンを含む (ただしこれらに限定されない)全てのクラスのコンピュータに適している。電力管理の観点から、OSPM/ACPI は、可能な場合はシステム全体を低電力状態 (スリープ状態)にすることを含め、未使用のデバイスを低電力状態にマイグレーションさせることにより、システムがエネルギーを節約すべきであるという概念を推進する。

本書では、ACPI ハードウェアインタフェース、ACPI ソフトウェアインタフェース、および ACPI データ構造について説明する。この ACPI ソフトウェアインタフェースを実装することで、堅牢な OS 指向コンフィギュレーションおよび電源管理 (OSPM)のサポートが可能になる。

## 1.1. Principal Goals

ACPI は OSPM を実装する上で重要な要素である。ACPI 定義インターフェイスは、ハードウェアおよびソフトウェアベンダーが ACPI 互換 (ひいては OSPM 互換)の実装を構築することを奨励するため、広く採用されることを意図している。

ACPIとOSPMの主な目標は以下の通りである：
- 全てのコンピュータシステムが、適切なコスト/機能のトレードオフを使用して、マザーボード構成と電源管理機能を実装できるようにする：
- コンピュータシステムには、デスクトップ、モバイル、ワークステーション、サーバマシンが含まれる (ただし、これらに限定されない)。
- マシンの実装者は、OSの完全サポートを維持しながら、非常にシンプルなものから非常にアグレッシブなものまで、幅広いソリューションを実装する自由がある。
- パワーマネージメントが広く実装されることで、アプリケーションはパワーマネージメントをサポートし、活用することが実用的で説得力のあるものとなる。それは、PCの新しい用途を実用的なものにし、PCの既存の用途をより経済的なものにする。
- 電源管理機能と堅牢性を強化する：
- プラットフォームのファームウェアに実装するには複雑すぎる電源管理ポリシーを、OSに実装してサポートできるため、安価な電源管理ハードウェアで非常に精巧な電源管理ポリシーをサポートできる。
- ユーザ、アプリケーション、ハードウェアからの電力管理情報をOSに集めることで、より良い電力管理の決定と実行が可能になる。
- OSにおける電源管理アルゴリズムの統一は、ファームウェアとOS間のコンフリクトを減らし、信頼性を高める。
- 電力管理の業界全体への導入を促進し、加速する：

$\circ$ OSPM and ACPI reduces the amount of redundant investment in power management throughout the industry, as this investment and function will be gathered into the OS. This will allow industry participants to focus their efforts and investments on innovation rather than simple parity.
- OSはハードウェアから独立して進化できるため、全てのACPI対応マシンがOSの改良と革新の恩恵を受けることができる。
- マザーボードデバイスを設定するための堅牢なインターフェイスを作成する：
- 既存のインタフェースでは不可能な、新しい高度な設計を可能にする。

## 1.1.1. Principle of Inclusive Terminology

UEFIフォーラムは仕様の内容を構築し、維持する際に「包括的用語の原則」に従っている。これは、全ての文言が個人的な特徴に関係なく、全ての人に歓迎される、または歓迎される可能性が高いと認識されるように努力することを意味する。場合によっては、フォーラムが管理していないレガシー仕様への言及など、以前の作業から派生した表現がこの原則に従っていない可能性があることを、フォーラムは認めている。レガシー仕様、特にその仕様がもはや保守や開発中でない場合、その仕様上で読まれるコードの互換性を維持するために、この仕様の文言はこの原則にそぐわないように見える可能性がある。当フォーラムは、他の標準化団体と協力し、このような例を時間をかけて排除していくことを決意している。その一方で、以下のことを認識し、呼びかける。
この問題に注目することで、標準化に取り組む技術コミュニティの多様で革新的な人々を反映したインクルーシブランゲージのより完全な使用に向けて、議論と行動を促進することが期待される。

## 1.2. Power Management Rationale

上記の主な目標を達成するためには、電源管理をOSに移し、OSとハードウェアの間に抽象的なインタフェース (ACPI)を使用する必要がある。ACPIは抽象的であるため、OSはハードウェアとは別に進化することができ、同様にハードウェアもOSとは別に進化できる。

ACPIは、その性質上、OSやプロセッサ間でよりポータブルである。ACPIの制御方法は、特定の機能を非常に柔軟に実装することを可能にする。

旧来の電源管理アプローチの問題点には、以下のようなものがある：
- パワーマネージメントのサポートは最小限であるため、アプリケーションベンダーはパワーマネージメントをサポートしたり、利用したりすることができない。
- パワーマネージメント機能をOSに組み込むことで、OSがインストールされている全てのマシンで利用できるようになる。機能のレベル (節電など)はマシンによって異なるが、ユーザとアプリケーションは、全てのOSPMマシンで同じ電源インターフェイスとセマンティクスを見ることができる。
- これにより、アプリケーションベンダーは、自社製品に電力管理機能を追加するための投資を行うことができるようになる。
- レガシーパワーマネジメントアルゴリズムは、それを実装するプラットフォームファームウェアが利用可能な情報によって制限されていた。そのため、実装できる機能が制限されていた。
- ユーザ、アプリケーション、ハードウェアからの電力管理情報と指令をOSに集中させることで、より強力な機能の実装が可能になる。例えば、OSはI/O操作を通常とレイテンシに分けるポリシーを持つことができる。レイテンシI/O操作 (ワープロがバックグラウンドでファイルを保存するような操作)は、塊に集められ、必要なI/Oデバイスが何らかの理由でパワーアップしたときにのみ実行される。必要なデバイスがパワーダウンしているときに行われた非レイジーI/Oリクエストは、デバイスを直ちにパワーアップさせ、非レイジーI/Oリクエストを実行し、保留中のレイジーI/O操作を実行させる。このようなポリシーには、I/Oデバイスがいつパワーアップするかを知ること、どのアプリケーションI/O要求がレイテンシしているかを知ること、そしてそのようなレイテンシI/O操作が飢餓状態にならないことを保証できることが必要である。
- 留守番電話などのアプライアンス機能は、グローバルに首尾一貫した電力決定を必要とする。例えば、電話応答アプリケーションはOSを呼び出し、"電話の着信を待っている。システムがどのようなスリープ状態になっても、1秒以内にスリープを解除して電話に応答できなければならない。"と主張できる。その後、ユーザが「オフ」ボタンを押すと、システムは電話応対サービスのニーズに合致した最も深いスリープ状態を選ぶだろう。
- プラットフォームファームウェアは、パワーマネジメントを扱うために非常に複雑になっている。OSと連動させるのは難しく、ハードウェアの静的コンフィギュレーションに限られている。
- プラットフォームファームウェアが保持管理する状態情報は、 (OSが管理するため)はるかに少ない。
- 電源管理アルゴリズムはOSに統一され、OSとハードウェア間の統合がより向上した。
- モバイルシステムがドッキングしたときなど、追加のACPIテーブル (定義ブロック)をロードできるため、OSは動的なマシン構成に対応できる。
- プラットフォームファームウェアは機能が少なく、シンプルであるため、実装とサポートがはるかに簡単 (したがって安価)である。

## 1.3. Legacy Support

ACPIは、レガシーハードウェアからACPIハードウェアへの整然としたマイグレーションをサポートし、1台のマシンに両方のメカニズムを存在させ、必要に応じて使用することを可能にする。

\begin{tabular}{|l|l|}
\hline Hardware/OS & Legacy OS \\
\hline Legacy hardware & A legacy OS on legacy hardware dc \\
\hline Legacy and ACPI hardware support in machine & It works just like a legacy OS on leॄ \\
\hline ACPI-only hardware & There is no power management. \\
\hline
\end{tabular}

## 1.4. OEM Implementation Strategy

どのOEMも、いつものように、彼らが適切と考えるように自由にハードウェアを構築できる。ACPI仕様が存在する以上、2つの一般的な実装戦略が可能である：
- OEM (Original Equipment Manufacturer：相手先ブランド製造業者)は、OSベンダーが提供するACPI OSPMソフトウェアを採用し、ACPI仕様のハードウェア部分を (与えられたプラットフォームに対して)多くの可能な方法のうちの1つで実装できる。
- OEMは、ACPIと互換性のないドライバとハードウェアを開発できる。この戦略により、ハードウェア実装の可能性がさらに広がります。しかし、OSPM 互換で ACPI 互換でないハードウェアを実装する OEM は、その実装のためのドライバの開発、テスト、配布のコストを負担することになる。

## 1.5. Power and Sleep Buttons

OSPMはコンシューマーに新しいアプライアンスインタフェースを提供する。特に、「ソフト」ボタンであるスリープボタンを提供し、マシンを物理的にオフにするのではなく、OSにマシンをソフトオフまたはスリープ状態にするよう信号を送る。ACPIは以下の2種類を定義している。
ひとつはマシンをスリープ状態にするためのもので、もうひとつはマシンをソフトオフ状態にするためのものである。

これにより、OEMは2つの異なる方法でマシンを導入できる：ワンボタンモデルとツーボタンモデルである。ワンボタンモデルは、ユーザ設定により電源ボタンまたはスリープボタンとして使用できるボタンが1つある。2ボタンモデルには、簡単にアクセスできるスリープボタンと独立した電源ボタンがある。いずれのモデルにおいても、OSPMの操作なしにマシンをソフトオフ状態にするオーバーライド機能も、稀ではあるが問題のある様々な状況に対処するために必要である。

## 1.6. ACPI Specification and the Structure of ACPI

本仕様書は、ACPI ハードウェアインタフェース、ACPI ソフトウェアインタフェース、および ACPI データ構造を定義する。また、これらのインタフェースのセマンティクスも定義する。

以下の図 1.1 は、OSPM/ACPI のソフトウェアとハードウェアのコンポーネントと、それらの相互関係を示したものである。この仕様は、コンポーネント間のインターフェイス、ACPI システム記述テーブルの内容、および他の ACPI コンポーネントの関連するセマンティクスを記述している。特定のプラットフォームのハードウェアを記述する ACPI システム記述テーブルが ACPI 実装の中心であり、ACPI システムファームウェアの役割は、主に ACPI テーブルを提供することであることに注意 (ネイティブ命令 API ではなく)。

ACPIはソフトウェア仕様ではなく、ハードウェア仕様でもない。ACPIは、ソフトウェアとハードウェアの両方に対応し、それらがどのように動作しなければならないかを規定しているが、その代わりに、ソフトウェアとハードウェアの両方の要素で構成されるインターフェイス仕様である。

![](https://cdn.mathpix.com/cropped/2024_03_27_8bba9092f94d5ba14d4ag-05.jpg?height=1010&width=1376&top_left_y=1668&top_left_x=226)

ACPIの一部ではなく、OS固有の技術

ACPI仕様は以下の分野をカバーしている。

ACPIの一部ではない、ハードウェア/プラットフォーム固有の技術

ACPIには3つのランタイムコンポーネントがある：

# ACPI System Description Tables

ハードウェアへのインタフェースを記述する。一部の記述は、構築できるものを制限している (例えば、一部の制御は固定レジスタブロックに組み込まれており、テーブルはレジスタブロックのアドレスを指定する)。ほとんどの記述では、ハードウェアを任意の方法で構築でき、ハードウェアを機能させるために必要な任意の操作シーケンスを記述できる。定義ブロック」を含むACPIテーブルでは、疑似コードタイプの言語を使用することができ、その解釈はOSによって実行される。つまり、OSPMは、擬似コード言語でエンコードされ、"Definition Blocks "を含むACPIテーブルに格納されたプロシージャを実行するインタプリタを含み、使用する。擬似コード言語は、ACPIマシンランゲージ (AML)として知られ、コンパクトでトークン化された抽象的なタイプのマシンランゲージである。

# ACPI Registers

ハードウェアインタフェースの制約部分で、ACPIシステム記述テーブルによって (少なくとも位置的には)記述される。

# ACPI Platform Firmware

ACPI 仕様と互換性のあるファームウェアの部分を指す。通常、これは (レガシーBIOSが行ってきたように)マシンを起動し、スリープ、ウェイク、および一部の再起動操作のためのインタフェースを実装するコードである。レガシーBIOSと比較して、ACPIが呼び出されることはほとんどない。ACPI記述テーブルもACPIプラットフォームファームウェアによって提供される。

## 1.7. OS and Platform Compliance

ACPI 仕様はインターフェイス仕様のみを含んでいる。ACPI には、プラットフォームのコンプライアンス要件は含まれていない。以下のセクションでは、ACPIで定義されたインタフェースを参照するクラス固有のプラットフォーム実装のガイドラインと、OSがOSPM/ACPIを完全にサポートするために必要となる機能拡張のガイドラインを示す。ACPI互換OSの最小機能実装要件も示す。

## 1.7.1. Platform Implementations of ACPI-defined Interfaces

システムプラットフォームは、プラットフォームハードウェアを介して ACPI 定義ハードウェアインタフェースを実装し、ACPI システムファームウェアを介して ACPI 定義ソフトウェアインタフェースとシステム記述テーブルを実装する。特定の ACPI 定義インターフェイスと OSPM コンセプトは、あるクラスのマシン (モバイルシステムなど)には適しているが、別のクラスのマシン (マルチドメインエンタープライズシステムなど)には適していない場合がある。
サーバ)。全てのプラットフォームクラスと、プラットフォームクラスに必要とされる適切なACPI定義インタフェースを指定することは、この仕様の能力と範囲を超えている。

プラットフォーム設計ガイドの作成者は、特定の設計ガイドで扱う特定のシステムプラットフォームクラスに適した、適切なACPI定義インタフェースとハードウェア要件を要求することが推奨される。プラットフォーム設計ガイドは、ACPI仕様で定義されているものと同様の機能を提供する代替インタフェースを定義すべきではない。

## 1.7.1.1. Recommended Features and Interface Descriptions for Design Guides

デザインガイドでは、プラットフォームクラスの要件としてACPI仕様で定義された全ての機能、概念、インタフェースを記述するために、共通の記述テキストとカテゴリ名を使用する必要がある。以下に、ACPIで定義された機能、概念、インタフェースを記述するために使用する、推奨される高レベルのテキストとカテゴリ名を示す。

# (9) Note

以下に規定するインタフェースの定義と関係要件は、一般にACPI仕様全体に広がっている：
- システムアドレスマップインタフェース
- ACPIシステム記述テーブル
- ルートシステム記述ポインタ (RSDP)
- システム説明表ヘッダー
- ルートシステム記述表 (RSDT)
- 固定ACPI記述テーブル (FADT)
- ファームウェアACPI制御構造 (FACS)
- 差別化システム記述テーブル (DSDT)
- セカンダリシステム記述テーブル (SSDT)
- マルチプルAPICディスクリプションテーブル (MADT)
- スマートバッテリーテーブル (SBST)
- 拡張システム記述テーブル (XSDT)
- 組み込みコントローラブートリソーステーブル (ECDT)
- システムリソースアフィニティテーブル (SRAT)
- システム所在地情報表
- 修正済みプラットフォームエラーポーリングテーブル (CPEP)
- 最大システム特性表 (MSCT)
- ACPI RASフィーチャーテーブル (RASF)
- ACPI RAS2フィーチャーテーブル (RAS2)
- メモリパワーステートテーブル (MPST)
- プラットフォームメモリトポロジ表

- ブートグラフィックスリソーステーブル (BGRT)

- ファームウェアパフォーマンスデータテーブル (FPDT)

- 汎用タイマ記述テーブル (GTDT)

- 固定ACPI記述テーブル (FADT)

- 電源管理タイマ制御/ステータス

- S5オーバーライド付き電源ボタンまたはスリープボタン (汎用スペースでも可能)

- リアルタイムクロックウェイクアップアラームコントロール/ステータス

- $\mathrm{SCl} / \mathrm{SMI}$ 電源管理および汎用イベントの制御/ステータスのルーティング

- システム電源状態制御 (スリープ/ウェイク制御)

- プロセッサ電源状態制御 (cステート)

- プロセッサスロットル制御/ステータス

- プロセッサのパフォーマンス状態の制御/状態

- 汎用イベント制御/ステータス

- グローバルロックコントロール/ステータス

- システムリセットコントロール

- 組込みコントローラ制御/ステータス

- SMBus ホストコントローラ (HC)制御/ステータス

- スマートバッテリーサブシステム

- ACPI 定義 Generic Register Interfaces と ACPI Namespace 内のオブジェクト定義。

- 汎用イベント処理

- マザーボードデバイスの識別、設定、挿入/取り外し

- サーマルゾーン

- 電源制御

- デバイスの電源状態制御

- システム電源状態制御

- システム指標

- デバイスとデバイス制御：
- プロセッサ
- 制御方式バッテリー
- スマートバッテリーサブシステム
- モバイルリッド
- S5オーバーライド付き電源ボタンまたはスリープボタン (固定スペースでも可能)
- 組み込みコントローラ
- 扇風機
- 汎用バスブリッジ
- ATAコントローラ
- フロッピーコントローラ
- GPEブロック
- モジュール
- メモリー

- グローバルロック関連インタフェース

- ACPIイベントプログラミングモデル

- ACPI定義プラットフォームファームウェアの責任
- ACPI定義の状態定義：
- グローバルシステム電源状態 (G状態、S0、S5)
- システムのスリープ状態 (S状態S1～S4)
- デバイスの電源状態 (Dステート)
- プロセッサの電源状態 (Cステート)
- デバイスとプロセッサのパフォーマンスステート (Pステート)

## 1.7.1.2. Terminology Examples for Design Guides

次の例は、クライアントプラットフォームの設計ガイドが、推奨用語を使用して ACPI 要件を定義する方法を示している。

# (9) Note

この例は、ACPI用語の使用方法のガイドラインとして提供されている。ACPI 要件の記述として解釈されるべきではない。

本プラットフォームデザインガイドに準拠するプラットフォームは、以下の ACPI 定義システム機能、コンセプト、インターフェイス、およびそれらに関連するイベントモデルを実装する必要がある：
- システムアドレスマップインタフェース
- システムファームウェアで提供されるACPIシステム記述表
- ACPI 定義固定レジスタインタフェース：
- 電源管理タイマ制御/ステータス
- S5オーバーライド付き電源ボタンまたはスリープボタン (汎用レジスタ空間にも実装可能)
- リアルタイムクロックウェイクアップアラームコントロール/ステータス
- 汎用イベント制御/ステータス
- $\mathrm{SCI} / \mathrm{SMI}$ パワーマネージメントおよび汎用イベントの制御/ステータスのルーティング (システムがレガシーモードをサポートしている場合のみ制御が必要)
- システム電源状態制御 (スリープ/ウェイク制御)
- プロセッサ電源状態制御 (C1用)
- グローバルロックコントロール/ステータス (システムでグローバルロックインタフェースが必要な場合)
- ACPI 定義 Generic Register Interfaces と ACPI Namespace 内のオブジェクト定義：
- 汎用イベント処理
- マザーボードデバイスの識別、設定、挿入/取り外し
- システム電源状態制御 (7.3節)
- デバイスとデバイス制御：
- プロセッサ
- 制御方法バッテリー (またはモバイルシステムのスマートバッテリーサブシステム)
- スマートバッテリーサブシステム (またはモバイルシステムの制御方式バッテリー)
- S5オーバーライド付き電源ボタンまたはスリープボタン (固定レジスタ空間にも実装可能)
- ハードウェアの論理レジスタがOS環境とファームウェア環境で共有されている場合のグローバルロック関連インタフェース
- ACPIイベントプログラミングモデル
- ACPI定義プラットフォームファームウェアの責任
- ACPI定義の状態定義：
- システムスリープ状態 (少なくとも1つのシステムスリープ状態、S1～S4が実装されていること)
- デバイスの電源状態 (D状態はデバイスクラス仕様に従って実装されなければならない)
- プロセッサの電源状態 (全てのプロセッサがC1電源状態に対応していること)

次の例は、推奨用語を使用して、複数の OS インスタンスを実行するシステムの ACPI 関連要件を定義し、システムクラスに対して堅牢な構成と継続的な可用性を要求することを目的とした設計ガイドを示している。

# (1) Note

この例は、ACPI用語の使用方法のガイドラインとして提供されている。ACPI 要件の記述として解釈されるべきではない。

本プラットフォームデザインガイドに準拠するプラットフォームは、以下の ACPI 定義システム機能とインターフェイス、およびそれらに関連するイベントモデルを実装する必要がある：
- システムアドレスマップインタフェース
- システムファームウェアで提供されるACPIシステム記述表
- ACPI 定義固定レジスタインタフェース：
- 電源管理タイマ制御/ステータス
- 汎用イベント制御/ステータス
- $\mathrm{SCl} / \mathrm{SMI}$ 電源管理および汎用イベントの制御/ステータスのルーティング
- (システムがレガシーモードをサポートしている場合にのみ必要な制御)
- システム電源状態制御 (スリープ/ウェイク制御)
- プロセッサ電源状態制御 (C1用)
- グローバルロックコントロール/ステータス (システムでグローバルロックインタフェースが必要な場合)
- ACPI 定義 Generic Register Interfaces と ACPI Namespace 内のオブジェクト定義：
- 汎用イベント処理
- マザーボードデバイスの識別、設定、挿入/取り外し (セクション6)
- システム電源状態制御 (7.3節)
- システム指標
- デバイスとデバイス制御：
- ハードウェアの論理レジスタがOS環境とファームウェア環境で共有されている場合のグローバルロック関連インタフェース
- ACPI イベントプログラミングモデル (5.6節)
- ACPIで定義されたプラットフォームファームウェアの責任 (セクション15)
- ACPI定義の状態定義：

プロセッサの電源状態 (全てのプロセッサがC1電源状態に対応していること)

## 1.7.2. OSPM Implementations

ACPIで定義された機能、コンセプト、インターフェイスを、OSが実行するシステムプラットフォームクラスに適した関連イベントモデルとともにサポートするためには、OSの機能拡張が必要である。これがOSPMの実装である。以下に、ACPIで定義された全てのインタフェースをサポートするために必要なOSの機能拡張と要素の概要を示す。OSPMの実装によってACPIをサポートするには、OSを以下のように変更する必要がある：
- システムアドレスマップインタフェースを使用する。
- ACPI System Description Tablesを見つけて消費する。
- ACPIマシン語 (AML)を解釈する。
- ACPI Namespaceに記述されているマザーボードデバイスを列挙し、設定する。
- 電源管理タイマとのインタフェース。
- リアルタイムの時計の目覚ましアラームとのインターフェイス。
- ACPIモードに入る (レガシーハードウェアシステムの場合)。
- デバイスの電源管理ポリシーを実装する。
- 電力リソース管理を実施する。
- スケジューラアイドルハンドラにプロセッサパワーステートを実装する。
- プロセッサとデバイスのパフォーマンス状態を制御する。
- ACPI熱モデルを実装する。
- SCI割り込みの処理、固定イベントの管理、汎用イベント、組み込みコントローラ割り込み、ダイナミックデバイスサポートを含む、ACPIイベントプログラミングモデルをサポート。
- グローバルロックの獲得とリリースをサポート。
- システムをリセットするには、リセットレジスタを使用する。
- 電源管理ポリシーに影響を与えるAPIを提供する。
- ACPI定義デバイスのドライバサポートを実装する。
- システム指標をサポートするAPIを実装する。
- 全てのシステム状態S1～S5をサポート。

## 1.7.3. OS Requirements

以下のリストは、OSPM/ACPI互換OSの最小要件を説明したものである：
- インテルアーキテクチャ (IA)プラットフォームのシステムアドレスマップを取得するには、セクション15を使用する：
- INT 15H, E820H- システムアドレスマップ照会インタフェース (セクション15を参照)
- EFI GetMemoryMap() ブートサービス関数 (セクション15参照)
- ACPI System Description Tables(セクション5参照)を見つけ、消費する。
- 定義された全てのAML文法要素をサポートするAMLインタプリタの実装 (セクション20参照)。
- SCI割り込みの処理、固定イベントの管理、汎用イベント、組み込みコントローラ割り込み、ダイナミックデバイスのサポートを含む、ACPIイベントプログラミングモデルのサポート。
- ACPI Namespaceに記述されているマザーボードデバイスを列挙し、設定する。
- この仕様で定義されている以下の ACPI デバイスのサポートを実装する：
- 組み込みコントローラデバイス (セクション12を参照)
- GPEブロックデバイス (セクション9.9参照)
- ACPI 熱モデルの実装 (セクション 3.10 参照)。
- グローバルロックの獲得とリリースをサポート。
- OS 指向の電源管理サポート (デバイスドライバは、「付録 A：デバイスクラス仕様」に記載されているデバイス電源管理クラス仕様で説明されているデバイスコンテキストを維持する責任を負う)。

## 1.8. Target Audience

この仕様は以下のユーザを対象としている：
- ACPI互換インターフェイスを含むハードウェアを製造するOEM
- OSおよびデバイスドライバ開発者
- 全てのプラットフォームシステムのファームウェア開発者
- CPUとチップセットのベンダー
- 周辺機器ベンダー

## 1.9. Document Organization

ACPI仕様書は、以下の4つの部分で構成されている：
- 仕様の最初の部分 (第1章から第3章)は、ACPIを紹介し、概要を説明している。
- 第 2 部 (第 4 章と第 5 章)では、ACPI のハードウェアとソフトウェアのプログラミングモデルを定義している。
- 第3部 (第6章から第17章)は、ACPI実装の詳細を規定したもので、この部分は主に開発者向けの仕様となっている。
- 第 18 章は ACPI ソース言語 (ASL)リファレンスで、本仕様書の他の多くのセクションで参照されている。
- 付録には、特定のクラスのデバイスの電源管理特性、およびデバイスクラス固有の ACPI インタフェースを説明するデバイスクラス仕様が含まれている。

## 1.9.1. ACPI Introduction and Overview

仕様書の最初の3つのセクションは、ACPIの概要を説明している。

第1章：はじめに

仕様の目的とゴールについて説明し、ACPI互換システムアーキテクチャの概要を示し、ACPI互換システムの最小要件を規定し、関連仕様への参照を提供する。

第2章用語の定義

本仕様書で使用される主要用語を定義する。特に、グローバルシステム状態 (メカニカルオフ、ソフトオフ、スリープ、動作中、および不揮発性スリープ)は、デバイスの電源状態の定義とともに本章で定義される：オフ (D3)、D3hot、D2、D1、およびフルオン (D0)。デバイスとプロセッサの性能状態 (P0、P1、...Pn)についても説明する。

# Chapter 3: ACPI Overview

システム電源管理、デバイス電源管理、プロセッサ電源管理、プラグアンドプレイ、システムイベントの処理、バッテリー管理、熱管理など、ACPI仕様がカバーする機能分野の概要を説明。

## 1.9.2. Programming Models

第4章と第5章は、ACPIハードウェアとソフトウェアのプログラミングモデルを定義している。本仕様書のこの部分は、主にシステム設計者、開発者、プロジェクト管理者向けである。

この後に続く仕様の実装指向の章、リファレンス章、プラットフォーム例の章 (仕様の残りの章)は全て、第4章と第5章で定義されたモデルに基づいている。これらの章は、ACPI仕様の中心である。この2つの章の間には、広範な相互参照がある。

第4章 ACPIハードウェア仕様

この仕様の目標を満たす一連のハードウェアインタフェースを定義する。

第5章 ACPIソフトウェアプログラミングモデル

この仕様の目標を満たす一連のソフトウェアインタフェースを定義する。

## 1.9.3. Implementation Details

仕様の第3部は、ACPI互換プラットフォーム上で動作するコンポーネントを実際に構築するために必要な実装の詳細を定義している。この部分は主に開発者向けの仕様である。

デバイスの設定やリソースの割り当て、リソースの共有に使用される予約済み Plug and Play オブジェクトと、デバイスの挿入と取り外しを追跡するために使用される予約済みオブジェクトを定義する。また、ACPI 互換のリソース記述子のフォーマットも定義する。

第7章：パワーとパフォーマンスマネジメント

予約されたデバイス電源管理オブジェクトと予約されたシステム電源管理オブジェクトを定義する。

# Chapter 8: Processor Configuration and Control

システムが動作状態にある間、OSがプロセッサの消費電力やその他の制御をどのように管理するかを定義する。

# Chapter 9: ACPI-Specific Device Objects

デバイス固有の ACPI コントロールのサポートが必要な統合デバイスを、提供可能なデバイス固有の ACPI コントロールとともにリストアップする。ほとんどのデバイスオブジェクトは、汎用オブジェクトと制御メソッドで制御され、汎用デバイス ID を持っている。

# Chapter 10: Power Source Devices

予約されたバッテリデバイスと AC アダプタオブジェクトを定義する。

# Chapter 11: Thermal Management

予約された熱管理オブジェクトを定義する。

# Chapter 12: ACPI Embedded Controller Interface Specification

ACPI互換OSと組み込みコントローラ間のインタフェースを定義する。

# Chapter 13: ACPI System Management Bus Interface Specification

ACPI互換OSとシステム管理バス (SMBus)ホストコントローラ間のインタフェースを定義する。

第14章プラットフォーム通信チャネル

OSPMがプラットフォーム内のエンティティと通信するための一般的なメカニズムを説明し、新しいアドレス空間タイプを定義する。

# Chapter 15: System Address Map Interfaces

ISA/EISA/PCIバスベースのシステムで使用する特別なINT 15コールについて説明する。このコールは予約されているアドレス範囲とマザーボード上で利用可能なアドレス範囲を示すクリーンなメモリーマップを OS に提供する。UEFI ベースのメモリーアドレスマップ報告インタフェースについても説明する。

システムの動作状態とスリープ状態の遷移、およびウェイクイベントとの関係を詳細に定義する。6,7,8章で定義された予約オブジェクトを参照。

第17章非一様メモリアクセス (NUMA)アーキテクチャプラットフォーム

ACPI 定義インタフェースを使用して NUMA アーキテクチャプラットフォームを記述する方法について詳しく説明する。第5章、第6章、第8章、および第9章で定義された予約オブジェクトを参照している。

第18章 ACPIプラットフォームエラーインタフェース

プラットフォームベースのエラー検出ハードウェアによって検出される様々なタイプのハードウェアエラーイベントをOSPMが処理できるようにするためのインタフェースを定義する。

## 1.9.4. Technical Reference

仕様書の第4部には、開発者向けの参考資料が含まれている。

第19章 ACPIソース言語リファレンス

ACPI制御メソッドを記述するために使用できる全てのASL文の構文と、構文の使用例を定義する。

第20章 ACPIマシン言語仕様

ACPI仮想マシン言語の文法を定義する。ASL トランスレータ (コンパイラ)は AML を出力する。

第21章 ACPIデータテーブルとテーブル言語の定義

任意のACPIデータテーブルを生成するために使用できる簡単な言語 (テーブル定義言語、TDL)について説明する。

付録 A: デバイスクラス仕様

デバイスクラス毎のデバイス固有の電源管理動作を記述する。

付録B：ビデオエクステンション

ビデオデバイスクラス固有のACPIインターフェイスを含む

## 1.9.5. Revsion Numbers

ACPI仕様の更新は、以下に説明するように、新リビジョンまたは正誤表のいずれかとみなされる：
- 新しいリビジョンは、実質的に新しい内容や、既存の動作を変更するような変更があった場合に作成される。新しいリビジョンはMajor.Minorのバージョン番号で指定される (例：6.3)。変更が例外的に軽微な場合は、Major.Minor.Minorという命名規則がある (例：6.3.1)。
- 正誤表は、提案された仕様の変更または修正が、重要な新要素を含まないか、既存の動作を修正しない場合に作成される。正誤表は、6.2A のように、バージョン番号の最後に大文字を追加することで指定される。

## 1.10. Related Documents

レガシーハードウェアプラットフォームの電源管理およびプラグアンドプレイ仕様は、ACPI関連文書へのリンクから入手できる：
- アドバンストパワーマネージメント (APM)BIOS仕様
- プラグアンドプレイBIOS仕様

インテルアーキテクチャの仕様は、http://developer.intel.com および https://software.intel.com/en-us/articles/intel-sdm で入手できる。

その他のUEFI仕様はhttps://uefi.org/specifications：
- UEFI (Unified Extensible Firmware Interface)仕様
- プラットフォームインテグレーション (PI)仕様

スマートバッテリーシステムのコンポーネントとSMBusに関する文書と仕様は、以下のリンクから入手できる：
- スマートバッテリーシステムの仕様
- SMBus仕様

USB Power Delivery仕様 (改訂3.1、バージョン1.3)："Universal Serial Bus Power Management "の見出しの下にある "Links to ACPI-Related Documents" (http://uefi.org/acpi)を参照。